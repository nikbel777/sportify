import{O as c,P as g,G as V,q as k,r as v,B as h,v as I,o as f,c as d,a as w,y as B,x as m,t as M,K as R,Q as b}from"./D4WfDlbH.js";const N="$s";function y(...r){const i=typeof r[r.length-1]=="string"?r.pop():void 0;typeof r[0]!="string"&&r.unshift(i);const[t,o]=r;if(!t||typeof t!="string")throw new TypeError("[nuxt] [useState] key must be a string: "+t);if(o!==void 0&&typeof o!="function")throw new Error("[nuxt] [useState] init must be a function: "+o);const p=N+t,l=c(),s=g(l.payload.state,p);if(s.value===void 0&&o){const n=o();if(V(n))return l.payload.state[p]=n,n;s.value=n}return s}const S={class:"Input"},q=["placeholder","value"],x={key:0,class:"Input__error"},K=k({__name:"Input",props:{placeholder:{},useMask:{type:Boolean},modelValue:{},error_message:{},popup:{type:Boolean}},emits:["update:modelValue"],setup(r,{emit:i}){var t=r,o=i,p=v(),l=e=>{var u=e.target.value;if(!t.useMask){o("update:modelValue",u);return}var a=[...u].filter(_=>_>="0"&&_<="9").slice(0,11).join("");t.modelValue===a&&(p.value.value=s(a)),o("update:modelValue",a)},s=e=>t.useMask?[...String(e.replace(/\D+/,""))].map((u,a)=>a===0?"+7":a===1?" (9":a===4?") "+u:a===7||a===9?"-"+u:u).join(""):t.modelValue,n=h(()=>s(t.modelValue));return I(()=>{t.useMask&&o("update:modelValue","7")}),(e,u)=>(f(),d("div",S,[w("input",{class:B(["Input__input",{Input__input_error:e.error_message,"Input__input_error--popup":e.error_message&&e.popup,"Input__input--popup":e.popup}]),ref_key:"node_Input",ref:p,placeholder:e.placeholder,type:"text",value:m(n),onInput:u[0]||(u[0]=a=>m(l)(a))},null,42,q),e.error_message?(f(),d("div",x,M(e.error_message),1)):R("",!0)]))}}),P=(r,i)=>{var t=b(),o=y("popup_notify_props",()=>null),p=y("is_app_loading",()=>!1),l=v(""),s=v(""),n=v(""),e=v(""),u=()=>{l.value?n.value="":n.value="Заполните ваше имя",/\d{11}/.test(s.value)?e.value="":e.value="Заполните ваш телефон"},a=async _=>{if(console.log(111111),u(),!(e.value||n.value)){JSON.parse(localStorage.getItem("utm")||"{}"),document.cookie=`previousUrl=${document.location.host+t.path+t.hash}`;try{p.value=!0,console.log(1111111),r==null||r(),o.value=i||{status:"succes",text_btn:"Понятно",text_content:"Мы&nbsp;отправили ваши данные менеджерам. С&nbsp;вами свяжутся и&nbsp;ответят на&nbsp;все вопросы в&nbsp;ближайшее время.",max_width:500}}catch{o.value={text_header:"Заявка не принята",text_content:"Произошла ошибка. Повторите или попробуйте позже",status:"error"}}finally{p.value=!1}}};return{user_name:l,user_phone:s,error_user_name:n,error_user_phone:e,sendFormRequest:a}};export{K as _,P as a,y as u};
