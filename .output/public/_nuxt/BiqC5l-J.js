import{O as h,P as g,y as V,g as k,r as v,q as I,j as w,o as f,c as d,a as b,n as B,k as m,t as C,C as M,Q as R}from"./jutYF1u8.js";const j="$s";function y(...r){const i=typeof r[r.length-1]=="string"?r.pop():void 0;typeof r[0]!="string"&&r.unshift(i);const[t,o]=r;if(!t||typeof t!="string")throw new TypeError("[nuxt] [useState] key must be a string: "+t);if(o!==void 0&&typeof o!="function")throw new Error("[nuxt] [useState] init must be a function: "+o);const p=j+t,l=h(),s=g(l.payload.state,p);if(s.value===void 0&&o){const u=o();if(V(u))return l.payload.state[p]=u,u;s.value=u}return s}const q={class:"Input"},N=["placeholder","value"],E={key:0,class:"Input__error"},x=k({__name:"Input",props:{placeholder:{},useMask:{type:Boolean},modelValue:{},error_message:{},popup:{type:Boolean}},emits:["update:modelValue"],setup(r,{emit:i}){var t=r,o=i,p=v(),l=e=>{var n=e.target.value;if(!t.useMask){o("update:modelValue",n);return}var a=[...n].filter(_=>_>="0"&&_<="9").slice(0,11).join("");t.modelValue===a&&(p.value.value=s(a)),o("update:modelValue",a)},s=e=>t.useMask?[...String(e.replace(/\D+/,""))].map((n,a)=>a===0?"+7":a===1?" (9":a===4?") "+n:a===7||a===9?"-"+n:n).join(""):t.modelValue,u=I(()=>s(t.modelValue));return w(()=>{t.useMask&&o("update:modelValue","7")}),(e,n)=>(f(),d("div",q,[b("input",{class:B(["Input__input",{Input__input_error:e.error_message,"Input__input_error--popup":e.error_message&&e.popup,"Input__input--popup":e.popup}]),ref_key:"node_Input",ref:p,placeholder:e.placeholder,type:"text",value:m(u),onInput:n[0]||(n[0]=a=>m(l)(a))},null,42,N),e.error_message?(f(),d("div",E,C(e.error_message),1)):M("",!0)]))}}),A=(r,i)=>{var t=R(),o=y("popup_notify_props",()=>null),p=y("is_app_loading",()=>!1),l=v(""),s=v(""),u=v(""),e=v(""),n=()=>{l.value?u.value="":u.value="Заполните ваше имя",/\d{11}/.test(s.value)?e.value="":e.value="Заполните ваш телефон"},a=async _=>{if(console.log(111111),n(),!(e.value||u.value)){document.cookie=`previousUrl=${document.location.host+t.path+t.hash}`;try{p.value=!0,console.log(1111111);var c={name:l.value,phone:s.value};await fetch("http://sportify72.ru:5000/contact-request",{method:"post",body:JSON.stringify(c),headers:{"Content-Type":"application/json"}}),r==null||r(),o.value=i||{status:"succes",text_btn:"Понятно",text_content:"Мы&nbsp;отправили ваши данные менеджерам. С&nbsp;вами свяжутся и&nbsp;ответят на&nbsp;все вопросы в&nbsp;ближайшее время.",max_width:500}}catch{o.value={text_header:"Заявка не принята",text_content:"Произошла ошибка. Повторите или попробуйте позже",status:"error"}}finally{p.value=!1}}};return{user_name:l,user_phone:s,error_user_name:u,error_user_phone:e,sendFormRequest:a}};export{x as _,A as a,y as u};
